import{b as v,u as j,r as t,j as e,B as y}from"./index-D8mHM_0A.js";import{C as w,I as n}from"./Input-TmFTk8pX.js";function N(){const{register:d}=v(),{toast:x}=j(),[l,p]=t.useState(""),[a,h]=t.useState(""),[i,f]=t.useState(""),[o,u]=t.useState(!1),[c,r]=t.useState("");async function g(s){if(s.preventDefault(),a!==i)return r("Пароли не совпадают");if(a.length<6)return r("Минимум 6 символов");u(!0),r("");try{await d(l,a),x("Аккаунт создан ✅"),window.location.assign("/")}catch(m){r({user_exists:"Логин занят",invalid_username:"Логин слишком короткий",invalid_password:"Пароль слишком короткий",invalid_credentials:"Неверный логин или пароль",timeout:"Сервер не отвечает (таймаут)",network:"Сетевая ошибка",server_error:"Ошибка сервера"}[m.message]||m.message||"Ошибка")}finally{u(!1)}}return e.jsxs(w,{className:"max-w-sm mx-auto mt-24 space-y-4",children:[e.jsx("h2",{className:"heading text-2xl",children:"Регистрация"}),c&&e.jsx("div",{className:"text-red-400 text-sm",children:c}),e.jsxs("form",{onSubmit:g,className:"space-y-3",children:[e.jsx(n,{placeholder:"Логин",value:l,onChange:s=>p(s.target.value)}),e.jsx(n,{type:"password",placeholder:"Пароль",value:a,onChange:s=>h(s.target.value)}),e.jsx(n,{type:"password",placeholder:"Повтор пароля",value:i,onChange:s=>f(s.target.value)}),e.jsx(y,{variant:"primary",type:"submit",disabled:o,className:"w-full",children:o?"Создаём…":"Создать аккаунт"})]}),e.jsxs("div",{className:"text-sm text-white/60",children:["Есть аккаунт? ",e.jsx("a",{href:"/login",className:"underline",children:"Войти"})]})]})}function _(){return e.jsx(N,{})}export{_ as default};
