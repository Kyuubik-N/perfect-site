import{R as s,a as n,j as e,B as f}from"./index-D8mHM_0A.js";import{P as j}from"./Protected-BdHEd5Ge.js";import{y as w}from"./db-1gINX9ct.js";import{G as N}from"./GlassCard-CQsUbita.js";function C(){const[o,x]=s.useState([]),[l,c]=s.useState(""),[r,p]=s.useState(w()),[d,m]=s.useState(""),a=s.useCallback(async()=>{try{const u=(await n("/api/notes")).map(i=>({id:i.id,title:i.title,content:i.text,date:i.date,createdAt:0}));x(u)}catch(t){console.error(t)}},[]);s.useEffect(()=>{a()},[a]);const h=async t=>{t.preventDefault(),l.trim()&&(await n("/api/notes",{method:"POST",body:{title:l.trim(),text:d,date:r}}),c(""),m(""),await a())};return e.jsx(j,{children:e.jsxs("section",{className:"max-w-6xl mx-auto px-6 py-10",children:[e.jsx("h2",{className:"text-2xl font-semibold gradient-text",children:"Заметки"}),e.jsxs("form",{onSubmit:h,className:"mt-6 glass p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{className:"input flex-1",placeholder:"Заголовок",value:l,onChange:t=>c(t.target.value)}),e.jsx("input",{type:"date",className:"input max-w-[14rem]",value:r,onChange:t=>p(t.target.value)}),e.jsx(f,{type:"submit",children:"Добавить"})]}),e.jsx("textarea",{rows:3,className:"input",placeholder:"Текст заметки (необязательно)",value:d,onChange:t=>m(t.target.value)})]}),e.jsxs("div",{className:"mt-6 grid gap-4",children:[o.length===0&&e.jsx("div",{className:"text-white/60",children:"Пока нет заметок"}),o.map(t=>e.jsxs(N,{className:"hover:shadow-soft transition",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-white/90",children:t.title}),e.jsx("div",{className:"text-sm text-white/60",children:t.date})]}),t.content&&e.jsx("div",{className:"mt-2 text-white/80 whitespace-pre-wrap",children:t.content}),e.jsx("div",{className:"mt-3 flex gap-2",children:e.jsx("button",{onClick:async()=>{try{await n(`/api/notes/${t.id}`,{method:"DELETE"})}finally{await a()}},className:"px-3 py-1.5 rounded-md focus-ring text-red-300 hover:bg-red-900/10",children:"Удалить"})})]},t.id))]})]})})}export{C as default};
